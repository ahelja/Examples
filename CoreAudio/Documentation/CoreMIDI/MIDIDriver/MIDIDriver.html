<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/1998/REC-html40-19980424/loose.dtd">
<html>
<head>
<title>API Documentation</title>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<style type="text/css"><!--a:link {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #0000ff;}a:visited:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:active {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}a:hover {text-decoration: underline; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: small; color: #ff6600;}h4 {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; font-size: tiny; font-weight: bold;}body {text-decoration: none; font-family: lucida grande, geneva, helvetica, arial, sans-serif; }--></style>
<meta name="generator" content="HeaderDoc">
</head>
<body bgcolor="#ffffff">
<h1>MIDIDriver.h</h1>
<hr>
<p></p>
<b>Includes:</b><!-- a logicalPath="//apple_ref/doc/header/CFPlugIn.h" --><p>&lt;CoreFoundation/CFPlugIn.h&gt;<!-- /a -->,
<!-- a logicalPath="//apple_ref/doc/header/CFPlugInCOM.h" -->&lt;CoreFoundation/CFPlugInCOM.h&gt;<!-- /a -->,
<!-- a logicalPath="//apple_ref/doc/header/CFRunLoop.h" -->&lt;CoreFoundation/CFRunLoop.h&gt;<!-- /a -->,
<!-- a logicalPath="//apple_ref/doc/header/CoreMIDI.h" -->&lt;CoreMIDI/CoreMIDI.h&gt;<!-- /a --><br></p>
<p></p>
<hr>
<br><br><br><p>
This is the header file for Mac OS X's MIDI driver interface.
<br><br></p>
<h2>About MIDI drivers</h2>
<p>
MIDI drivers are CFPlugIns, installed into the following places:
</p>
<pre>
    /System/Library/Extensions      -- not recommended for non-Apple drivers, but
                                    necessary for compatibility with CoreMIDI 1.0
    
    /Library/Audio/MIDI Drivers     -- starting with CoreMIDI 1.1
    
    ~/Library/Audio/MIDI Drivers    -- starting with CoreMIDI 1.1
</pre>
<p>
Refer to the CFPlugIn documentation for more information about plug-ins.
<br><br></p>
<h2>Driver bundle/plug-in properties</h2>
<p>
A driver's bundle settings should include settings resembling the following:
</p>
<pre>
    Bundle settings:
        CFBundleIdentifier              String          com.mycompany.midi.driver.mydevice
            (note that this will be the driver's persistent ID in MIDISetup's)
        CFPlugInDynamicRegistration     String          NO
        CFPlugInFactories               Dictionary      1 key/value pair
            [your new factory UUID]     String          [your factory function name]
        CFPlugInTypes                   Dictionary      1 key/value pair
            ECDE9574-0FE4-11D4-BB1A-0050E4CEA526        Array       1 object
                (this is kMIDIDriverTypeID)
                0                       String          [your new factory UUID]
    Build settings:
        WRAPPER_EXTENSION               plugin
</pre>
<h2>Driver access to the CoreMIDI API</h2>
<p>
Drivers have access to most of the CoreMIDI API.  They should link with
CoreMIDIServer.framework, <b>not</b> CoreMIDI.framework.
<br><br>
Unlike applications, drivers communicate with the server directly, not 
through Mach messaging.  This necessitates some limitations on the contexts from 
which a driver may call the server.
<br><br>
The MIDI I/O functions MIDISend and MIDIReceived may be called from any thread.
<br><br>
All other CoreMIDI functions must only be called from the server's main thread, which is the
thread on which the driver is created and from which all calls to the driver other than
Send() are made.
<br><br></p>
<hr>
<br><center>(Last Updated February 25, 2005)
<br><font size="-1">HTML documentation generated by <a href="http://www.opensource.apple.com/projects" target="_blank">HeaderDoc</a></font>
</center>
</body>
</html>
